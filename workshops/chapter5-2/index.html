
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Learn practical implementation techniques for documents, images, tables, and SQL generation">
      
      
      
        <link rel="canonical" href="https://567-labs.github.io/systematically-improving-rag/workshops/chapter5-2/">
      
      
        <link rel="prev" href="../chapter5-1/">
      
      
        <link rel="next" href="../chapter6-1/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.14">
    
    
      
        <title>5.2 Implementing Multimodal Search - Systematically Improving RAG Applications</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.342714a4.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config",""),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#implementing-multimodal-search-handling-different-modalities" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
              <button class="md-banner__button md-icon" aria-label="Don't show this again">
                
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
              </button>
            
            
  <p>
    This material is supported by <a href="https://maven.com/applied-llms/rag-playbook?promoCode=EBOOK" target="_blank"><strong>Applied LLMs on Maven</strong></a>.  Readers get 20% off.
    Not ready? Check out the <a href="https://fivesixseven.ck.page/rag-crash-course" target="_blank"><strong>free email course</strong></a>.
  </p>

          </div>
          
            <script>var el=document.querySelector("[data-md-component=announce]");if(el){var content=el.querySelector(".md-typeset");__md_hash(content.innerHTML)===__md_get("__announce")&&(el.hidden=!0)}</script>
          
        </aside>
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Systematically Improving RAG Applications" class="md-header__button md-logo" aria-label="Systematically Improving RAG Applications" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Systematically Improving RAG Applications
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              5.2 Implementing Multimodal Search
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="black"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
    
  
  Workshops

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../office-hours/" class="md-tabs__link">
          
  
  
    
  
  Office Hours

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../talks/" class="md-tabs__link">
          
  
  
    
  
  Talks

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Systematically Improving RAG Applications" class="md-nav__button md-logo" aria-label="Systematically Improving RAG Applications" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Systematically Improving RAG Applications
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Workshops
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_2" id="__nav_2_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Workshops
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter0/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Chapter 1: Starting the Flywheel
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Chapter 1: Starting the Flywheel
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Chapter 2: From Evaluation to Enhancement
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Chapter 2: From Evaluation to Enhancement
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_5" >
        
          
          <label class="md-nav__link" for="__nav_2_5" id="__nav_2_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Chapter 3: User Experience
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_5">
            <span class="md-nav__icon md-icon"></span>
            Chapter 3: User Experience
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter3-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Design Principles
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter3-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Feedback Collection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter3-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Iterative Improvement
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_6" >
        
          
          <label class="md-nav__link" for="__nav_2_6" id="__nav_2_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Chapter 4: Topic Modeling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_6">
            <span class="md-nav__icon md-icon"></span>
            Chapter 4: Topic Modeling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter4-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Analysis
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter4-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prioritization
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_7" checked>
        
          
          <label class="md-nav__link" for="__nav_2_7" id="__nav_2_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Chapter 5: Multimodal Capabilities
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2_7">
            <span class="md-nav__icon md-icon"></span>
            Chapter 5: Multimodal Capabilities
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter5-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Understanding
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Implementation
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Implementation
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites-and-context" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites and context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#learning-objectives" class="md-nav__link">
    <span class="md-ellipsis">
      Learning objectives
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document-search-techniques" class="md-nav__link">
    <span class="md-ellipsis">
      Document Search Techniques
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Document Search Techniques">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-mixture-of-data-sources" class="md-nav__link">
    <span class="md-ellipsis">
      The Mixture of Data Sources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structured-extraction-example" class="md-nav__link">
    <span class="md-ellipsis">
      Structured Extraction Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pdf-processing-evolution" class="md-nav__link">
    <span class="md-ellipsis">
      PDF Processing Evolution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#image-search-techniques" class="md-nav__link">
    <span class="md-ellipsis">
      Image Search Techniques
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Image Search Techniques">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-similarity-assumption-problem" class="md-nav__link">
    <span class="md-ellipsis">
      The Similarity Assumption Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-two-people-example" class="md-nav__link">
    <span class="md-ellipsis">
      The "Two People" Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#improving-image-summaries" class="md-nav__link">
    <span class="md-ellipsis">
      Improving Image Summaries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contextual-augmentation" class="md-nav__link">
    <span class="md-ellipsis">
      Contextual Augmentation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visual-grounding-for-construction" class="md-nav__link">
    <span class="md-ellipsis">
      Visual Grounding for Construction
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-search-techniques" class="md-nav__link">
    <span class="md-ellipsis">
      Table Search Techniques
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Table Search Techniques">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#approach-1-table-as-document" class="md-nav__link">
    <span class="md-ellipsis">
      Approach 1: Table as Document
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#approach-2-table-as-database" class="md-nav__link">
    <span class="md-ellipsis">
      Approach 2: Table as Database
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql-query-generation" class="md-nav__link">
    <span class="md-ellipsis">
      SQL Query Generation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SQL Query Generation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-multiple-correct-answers-problem" class="md-nav__link">
    <span class="md-ellipsis">
      The Multiple Correct Answers Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#business-specific-calculations" class="md-nav__link">
    <span class="md-ellipsis">
      Business-Specific Calculations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-table-retrieval" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Table Retrieval
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieving-the-right-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieving the Right Capabilities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-ui-for-collecting-gold-standards" class="md-nav__link">
    <span class="md-ellipsis">
      The UI for Collecting Gold Standards
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subjective-query-interpretation" class="md-nav__link">
    <span class="md-ellipsis">
      Subjective Query Interpretation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics-and-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Metrics and evaluation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-pitfalls-and-anti-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Common pitfalls and anti-patterns
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-points" class="md-nav__link">
    <span class="md-ellipsis">
      Integration points
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    <span class="md-ellipsis">
      What’s next
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reflection-questions" class="md-nav__link">
    <span class="md-ellipsis">
      Reflection questions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#food-for-thought" class="md-nav__link">
    <span class="md-ellipsis">
      Food for Thought
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2_8" >
        
          
          <label class="md-nav__link" for="__nav_2_8" id="__nav_2_8_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Chapter 6: Architecture
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_8">
            <span class="md-nav__icon md-icon"></span>
            Chapter 6: Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter6-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Routing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter6-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tools
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chapter6-3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Improvement
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../office-hours/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Office Hours
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Office Hours
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../office-hours/faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../office-hours/AGENTS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agents
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Chapter 1: Starting the Flywheel
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Chapter 1: Starting the Flywheel
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../office-hours/cohort2/week1-summary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cohort 2 - Week 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../office-hours/cohort3/week-1-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cohort 3 - Session 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../office-hours/cohort3/week-1-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cohort 3 - Session 2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Chapter 2: From Evaluation to Enhancement
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Chapter 2: From Evaluation to Enhancement
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../office-hours/cohort2/week2-summary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cohort 2 - Week 2
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../office-hours/cohort3/week-2-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cohort 3 - Session 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../office-hours/cohort3/week-2-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cohort 3 - Session 2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_6" >
        
          
          <label class="md-nav__link" for="__nav_3_6" id="__nav_3_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Chapter 3: User Experience
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_6">
            <span class="md-nav__icon md-icon"></span>
            Chapter 3: User Experience
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../office-hours/cohort2/week3-summary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cohort 2 - Week 3
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../office-hours/cohort3/week-3-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cohort 3 - Session 1
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Chapter 4: Topic Modeling
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Chapter 4: Topic Modeling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../office-hours/cohort2/week4-summary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cohort 2 - Week 4
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../office-hours/cohort3/week-4-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cohort 3 - Session 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../office-hours/cohort3/week-4-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cohort 3 - Session 2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Chapter 5: Multimodal Capabilities
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            Chapter 5: Multimodal Capabilities
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../office-hours/cohort2/week5-summary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cohort 2 - Week 5
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../office-hours/cohort3/week-5-1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cohort 3 - Session 1
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../office-hours/cohort3/week-5-2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cohort 3 - Session 2
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_9" >
        
          
          <label class="md-nav__link" for="__nav_3_9" id="__nav_3_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Chapter 6: Architecture
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            Chapter 6: Architecture
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../office-hours/cohort2/week6-summary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cohort 2 - Week 6
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <div class="md-nav__link md-nav__container">
            <a href="../../talks/" class="md-nav__link ">
              
  
  
  <span class="md-ellipsis">
    Talks
    
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Talks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_2" >
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Search / Indexing / Chunking
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            Search / Indexing / Chunking
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/chromadb-anton-chunking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Text Chunking Strategies (Anton, ChromaDB)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/john-lexical-search/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Lexical Search in RAG Applications (John Berryman)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/query-routing-anton/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Query Routing for RAG Systems (Anton, ChromaDB)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/semantic-search-exa-will-bryk/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Why Google Search Sucks for AI (Will Bryk, Exa)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/rag-without-apis-browser-michael-struwig/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How OpenBB Ditched APIs and Put RAG in the Browser (Michael Struwig)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_3" >
        
          
          <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Finetuning
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_3">
            <span class="md-nav__icon md-icon"></span>
            Finetuning
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/glean-manav/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Building Custom Embedding Models Per Customer (Manav, Glean)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/fine-tuning-rerankers-embeddings-ayush-lancedb/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The 12% RAG Performance Boost You're Missing (Ayush, LanceDB)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/embedding-performance-generative-evals-kelly-hong/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Stop Trusting MTEB Rankings (Kelly Hong, Chroma)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_4" >
        
          
          <label class="md-nav__link" for="__nav_4_4" id="__nav_4_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Monitoring
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_4">
            <span class="md-nav__icon md-icon"></span>
            Monitoring
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/online-evals-production-monitoring-ben-sidhant/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Why Your AI Is Failing in Production (Ben & Sidhant)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/rag-antipatterns-skylar-payne/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The RAG Mistakes That Are Killing Your AI (Skylar Payne)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/zapier-vitor-evals/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How Zapier 4x'd Their AI Feedback Collection (Vitor)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_5" >
        
          
          <label class="md-nav__link" for="__nav_4_5" id="__nav_4_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Coding Agents
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_5">
            <span class="md-nav__icon md-icon"></span>
            Coding Agents
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/rag-is-dead-cline-nik/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Why Cline Ditched RAG for Direct Code Reading (Nik Pash)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/colin-rag-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Grep Beat Embeddings on SWE-Bench (Colin Flaherty, Augment)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/sourcegraph-agentic-code-agent-rag/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Agentic RAG from first principles (Beyang Liu, Sourcegraph)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/devin-cognition-multi-agents/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Why Devin does not use multi-agents (Walden Yan)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
      
        
      
        
      
        
      
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_6" >
        
          
          <label class="md-nav__link" for="__nav_4_6" id="__nav_4_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Document Processing
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_6">
            <span class="md-nav__icon md-icon"></span>
            Document Processing
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/reducto-docs-adit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Why Most Document Parsing Sucks (Adit, Reducto)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/superlinked-encoder-stacking/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Encoder Stacking and Multi-Modal Retrieval (Daniel, Superlinked)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../talks/extend-document-automation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    How Extend Achieves 95%+ Document Automation (Eli Badgio)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites-and-context" class="md-nav__link">
    <span class="md-ellipsis">
      Prerequisites and context
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#learning-objectives" class="md-nav__link">
    <span class="md-ellipsis">
      Learning objectives
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#document-search-techniques" class="md-nav__link">
    <span class="md-ellipsis">
      Document Search Techniques
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Document Search Techniques">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-mixture-of-data-sources" class="md-nav__link">
    <span class="md-ellipsis">
      The Mixture of Data Sources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#structured-extraction-example" class="md-nav__link">
    <span class="md-ellipsis">
      Structured Extraction Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pdf-processing-evolution" class="md-nav__link">
    <span class="md-ellipsis">
      PDF Processing Evolution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#image-search-techniques" class="md-nav__link">
    <span class="md-ellipsis">
      Image Search Techniques
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Image Search Techniques">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-similarity-assumption-problem" class="md-nav__link">
    <span class="md-ellipsis">
      The Similarity Assumption Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-two-people-example" class="md-nav__link">
    <span class="md-ellipsis">
      The "Two People" Example
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#improving-image-summaries" class="md-nav__link">
    <span class="md-ellipsis">
      Improving Image Summaries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#contextual-augmentation" class="md-nav__link">
    <span class="md-ellipsis">
      Contextual Augmentation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#visual-grounding-for-construction" class="md-nav__link">
    <span class="md-ellipsis">
      Visual Grounding for Construction
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#table-search-techniques" class="md-nav__link">
    <span class="md-ellipsis">
      Table Search Techniques
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Table Search Techniques">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#approach-1-table-as-document" class="md-nav__link">
    <span class="md-ellipsis">
      Approach 1: Table as Document
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#approach-2-table-as-database" class="md-nav__link">
    <span class="md-ellipsis">
      Approach 2: Table as Database
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sql-query-generation" class="md-nav__link">
    <span class="md-ellipsis">
      SQL Query Generation
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SQL Query Generation">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#the-multiple-correct-answers-problem" class="md-nav__link">
    <span class="md-ellipsis">
      The Multiple Correct Answers Problem
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#business-specific-calculations" class="md-nav__link">
    <span class="md-ellipsis">
      Business-Specific Calculations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-table-retrieval" class="md-nav__link">
    <span class="md-ellipsis">
      Testing Table Retrieval
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#retrieving-the-right-capabilities" class="md-nav__link">
    <span class="md-ellipsis">
      Retrieving the Right Capabilities
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-ui-for-collecting-gold-standards" class="md-nav__link">
    <span class="md-ellipsis">
      The UI for Collecting Gold Standards
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subjective-query-interpretation" class="md-nav__link">
    <span class="md-ellipsis">
      Subjective Query Interpretation
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metrics-and-evaluation" class="md-nav__link">
    <span class="md-ellipsis">
      Metrics and evaluation
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-pitfalls-and-anti-patterns" class="md-nav__link">
    <span class="md-ellipsis">
      Common pitfalls and anti-patterns
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integration-points" class="md-nav__link">
    <span class="md-ellipsis">
      Integration points
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#whats-next" class="md-nav__link">
    <span class="md-ellipsis">
      What’s next
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#summary" class="md-nav__link">
    <span class="md-ellipsis">
      Summary
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reflection-questions" class="md-nav__link">
    <span class="md-ellipsis">
      Reflection questions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#food-for-thought" class="md-nav__link">
    <span class="md-ellipsis">
      Food for Thought
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="implementing-multimodal-search-handling-different-modalities">Implementing Multimodal Search: Handling Different Modalities</h1>
<p>Now let's take a look at some specific modalities that we might care about in the context of building entity-specific search indices. We'll talk about documents, images, and a little bit about tables.</p>
<h2 id="prerequisites-and-context">Prerequisites and context</h2>
<ul>
<li>Read: <a href="../chapter5-1/">5.1 Understanding Specialized Retrieval</a></li>
<li>Builds on segmentation (Chapter 4) and feedback UX (Chapter 3)</li>
</ul>
<h2 id="learning-objectives">Learning objectives</h2>
<ul>
<li>Identify when to use document, image, table, and SQL retrievers</li>
<li>Design summaries or extractions to bridge inventory vs capability gaps</li>
<li>Evaluate modality pipelines with precision/recall at each stage</li>
</ul>
<h2 id="document-search-techniques">Document Search Techniques</h2>
<p>At a glance, there's only a couple of different ways that we can actually handle searching for documents. We can chunk the documents, we can make sure they have the correct metadata, and we can use things like contextual retrieval to rewrite some of the original text chunks. Once that's in place, we can either use lexical search or semantic search to do a good job.</p>
<p>And then, with the passages that we find, we apply re-rankers.</p>
<p>Lastly, we find the documents that matter using the re-rankers and shove it into a language model, take advantage of the long context and move on. And then anything else that we need to do in improving this will either come from the summarization or the extraction that we talked about earlier today.</p>
<h3 id="the-mixture-of-data-sources">The Mixture of Data Sources</h3>
<p>If you blend all of these different abilities together, it will result in a system that sometimes returns summaries of data. Sometimes it could return the entire document that we use in long context. And sometimes it might result in specific text chunks. Whether they're structured data that we pull out, or just a regular chunk from an 800 token window and a 50 percent overlap.</p>
<p>As long as the data is represented correctly - maybe some of the metadata is in the XML format of a prompt or whatnot - all we have to do is to tell the language model that we're going to receive a mixture of these kind of data sources and this will ultimately elicit a higher quality result. And your answers are going to get better and your only job is to curate this mixture of data sets.</p>
<h3 id="structured-extraction-example">Structured Extraction Example</h3>
<p>If we use structured outputs, for example, to extract structured data - maybe by defining some kind of category, like type and payment and invoice, we might define a date and a statement. Just by doing this, we can just easily save this into a Postgres database.</p>
<p>And then when we start having questions about this, we could potentially have a different function that says, you know what, I want to be able to query anything I want. I want to be able to filter on a type, if it matters. And I want to create some kind of date range. And now your only job is to hit that same database, create some kind of SQL statement, and you can extract that data back out. These two things are pretty synonymous.</p>
<p><strong>Real Examples from My Consulting:</strong></p>
<p>In finance, it turns out that we really cared about fiscal years compared to calendar years. And if we could resolve them in a better way, we would get better answers. One client had documents using fiscal year (July-June) while users asked about calendar years. Without proper extraction and mapping, 50% of financial queries failed.</p>
<p>When doing search over legal documents, it turns out that just by being able to predict whether something was a contract that was signed or unsigned, we can have much better ways of processing or filtering. Especially where we can also extract things like payment dates and payment terms, and just simply return the document ID.</p>
<p>For call transcripts, just by classifying them - maybe by a job interview or a stand up or a design review - we could extract type-specific metadata that allows us to build additional searches against different kinds of transcripts.</p>
<h3 id="pdf-processing-evolution">PDF Processing Evolution</h3>
<p>In the world of document processing, PDF parsing has only gotten much, much better. You can get 90 percent accuracy. But even just by using very simple models like Gemini and Anthropic, you still get pretty high performance. In the notebooks later, we'll talk a little bit more about how we might want to use language models that do extraction, but also why we might care about having things like bounding boxes and be able to cite things.</p>
<p>My general bet is that a lot of this PDF parsing world is gonna be around finding the locations of specific citations.</p>
<p>So with documents, a lot of it is gonna be around extraction, unstructured querying, and whatnot. And as prompt caching gets better, things like contextual retrieval will work quite well.</p>
<h2 id="image-search-techniques">Image Search Techniques</h2>
<p>Images, on the other hand, are a whole other story.</p>
<p>When we talked about images, we've talked briefly around the idea of generating summaries of images. However, it's really important to recognize that visual language models were trained on captioning data. And so this captioning data and the CLIP embeddings aren't very powerful in some situations.</p>
<p>While multimodal embeddings like CLIP embeddings might make sense for cost, complex question answering may result in very low precision for the same reasoning and passages.</p>
<h3 id="the-similarity-assumption-problem">The Similarity Assumption Problem</h3>
<p>It really comes down to the same assumption we talked about in session 2. Why would the question and an image be similar?</p>
<p>This assumption, and challenging this assumption, is how you're going to be able to get good summarizations. And generating good summarizations is a skill that you'll need not just for understanding images, but for all kinds of data.</p>
<p>The big mistake I see when people try to do this kind of work is they have a really simple prompt like, "what's in this image?" And because you're not very specific, maybe the image just says it's two people.</p>
<h3 id="the-two-people-example">The "Two People" Example</h3>
<p>To avoid this gap between the embedding of a question and the embedding of a summary, we have to do a lot better on how we write our prompts. We can't simply ask, "what's in this image?" Instead, you have to be very specific and try again to incorporate the questions you anticipate being asked about a system.</p>
<p>If you just ask, "what's in this image," you might get "two people." If you could do a little bit better, you might get "two people arguing."</p>
<p>And if you prompt it very well, maybe the actual description is going to be, "this is an image of person one and person two in a mysterious foggy scene arguing over the dinner table and someone has a knife," right? You can definitely imagine the embedding of these two phrases. These three phases are going to dramatically change whether or not information is going to be retrieved.</p>
<h3 id="improving-image-summaries">Improving Image Summaries</h3>
<p>To improve the summary, there's a ton of things that you can do. For one, you can leverage things like chain of thought to reason out the captioning data. If you're processing images that exist in the context of other documents, you could augment that context by extracting the image itself, potentially attaching any OCR results from that image, and even attaching nearby passages, maybe the text above and below a figure.</p>
<p>And we can even do things like leverage things like bounding boxes. And by doing all these techniques, part of the summarization work we talked about, we can create much more powerful summaries that can be used to improve our ability to recall certain documents.</p>
<p>If you want to pause here, this is an example of a prompt I use to generate better summaries:</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">generate_image_summary</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">ocr_text</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">context</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Generate a detailed, searchable image summary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">prompt</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    Analyze this image and create a comprehensive summary for search.</span>

<span class="s2">    1. Visual Description:</span>
<span class="s2">       - What objects, people, or scenes are visible?</span>
<span class="s2">       - What is the mood, lighting, or atmosphere?</span>
<span class="s2">       - What type of shot or perspective is used?</span>

<span class="s2">    2. Text Content (if any):</span>
<span class="s2">    &lt;ocr_text&gt;</span>
<span class="s2">       </span><span class="si">{</span><span class="n">ocr_text</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">ocr_text</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s2">&quot;No OCR text detected&quot;</span><span class="si">}</span>
<span class="s2">    &lt;/ocr_text&gt;</span>

<span class="s2">    3. Context (if provided):</span>
<span class="s2">    &lt;context&gt;</span>
<span class="s2">       </span><span class="si">{</span><span class="n">context</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s2">&quot;No additional context&quot;</span><span class="si">}</span>
<span class="s2">    &lt;/context&gt;</span>

<span class="s2">    4. Reasoning:</span>
<span class="s2">       - What is the likely purpose of this image?</span>
<span class="s2">       - What questions might users ask about it?</span>

<span class="s2">    5. Generate searchable tags and potential questions</span>

<span class="s2">    6. Final Summary:</span>
<span class="s2">       Create a 2-3 paragraph description optimized for retrieval</span>
<span class="s2">    &quot;&quot;&quot;</span>

    <span class="k">return</span> <span class="n">generate_with_vision_model</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">prompt</span><span class="p">)</span>
</code></pre></div>
<p>We attach the OCR data. We ask about visual descriptions of the scenes. We ask it to reason. And even generate potential questions and tags.</p>
<p>And only once we've done all that, do we actually ask for a summary and evaluate its performance. And again, its performance is going to be defined by whether or not the embedding of that summary is returned for a synthetic or user question.</p>
<h3 id="contextual-augmentation">Contextual Augmentation</h3>
<p>We can also augment the context. This is very similar to how people think about contextual retrieval. You know, we could pass in this entire image to the system. But also make sure we include the text here. That will allow us to get better results. We can just provide the image to the model, add the text above and below, and provide as much context as possible.</p>
<h3 id="visual-grounding-for-construction">Visual Grounding for Construction</h3>
<p>And lastly, for other situations where it matters, we can also add things like bounding boxes and visual grounding. In a lot of construction contexts, people ask us to count things, and it's really hard unless we do bounding boxes. And then the question is going to be a factor of whether or not our bounding box system is accurate.</p>
<p>We have very good classic, classical methods to evaluate that.</p>
<p>This kind of visual grounding is relevant not only for images, but also for, you know, simple things like PDFs. Because once we get very complex figures, even those are going to be bounding boxes. We can do things like counting and facial recognition and all that, but that's not really in the scope of this course.</p>
<h2 id="table-search-techniques">Table Search Techniques</h2>
<p>If you want to look at some of the simpler ways of thinking about tables, the first two I would recommend are the following.</p>
<h3 id="approach-1-table-as-document">Approach 1: Table as Document</h3>
<p>If you know that what you're looking for are specific rows in a table, then chunking a table and then using semantic search is totally fine. We might also want to generate summaries of these and run them against things like lexical search and semantic search.</p>
<p>With this, like I've said many times, synthetic data will tell you whether or not this direction is working. The thing you have to make sure to do is to preserve all the headers as part of the chunking.</p>
<p>This is really useful if you're looking for things like finding specific tables across many years in a financial document, or finding specifications with order forms, for example.</p>
<h3 id="approach-2-table-as-database">Approach 2: Table as Database</h3>
<p>The other thing you can do is directly incorporate the table metadata and treat a table as just another search index, in which case the important task is figuring out which table to query. Here, we can just standardize the schemas. So, for example, we might think of a create statement for a SQL table and then build semantic search against that.</p>
<p>And the same tools apply. It might be the case that embedding the create table is enough, sometimes we might want to do a summary, and allow for more complexity in that summary by having things like sample data.</p>
<p>Then your job is to find the right table, and then figure out what to do afterwards. If you find the right table, there's generally two other things you can consider. The first one, the simpler approach, is to just simply put the table into the context. And here, we're treating the table data just as another document.</p>
<p>This will work quite well with some of the thinking models that are available these days.</p>
<p>And by giving the language model some ability to write some code, you actually might be able to do some data analysis as well. And the last thing you can do is dynamically load this data either into SQL or write SQL against it, or even load this as a CSV, have a Python interpreter and do some data analysis in pandas.</p>
<p>This is a lot more complex. We won't really go into the details of how we can run pandas code dynamically, but generally the idea is that if you want to do some more analysis, we will have to load this in some kind of SQL like tool.</p>
<p>Here, as long as we're able to intelligently find the right table statements, we can use something like lexical search and semantic search. The real challenge will be how we can use pre-existing code snippets and pre-existing code analysis to show the language model what's possible. In this example, the tables themselves are the inventory, and the capabilities might be different ways we want to demonstrate to the language model how we want to create this data.</p>
<h2 id="sql-query-generation">SQL Query Generation</h2>
<p>So I also wanted to introduce a baseline on how I think about text to SQL and apply the same ideas we've thought about in synthetic data generation and understanding inventory versus capabilities.</p>
<h3 id="the-multiple-correct-answers-problem">The Multiple Correct Answers Problem</h3>
<p>The big challenge with text to SQL is that there's multiple correct answers. And executing some of these things can be very time consuming. And in a lot of practical examples, I've seen companies want to try to work with complex schemas that have tens or even hundreds of columns.</p>
<p>So if we reframe our approach using the same tools that we have already at our disposal, then we can think about the following. Let's focus on first inventory. Do we have the right tables? Can we retrieve them well? And do we have the right columns? And can we retrieve those well? Then we can focus on the right capabilities.</p>
<p>Can we demonstrate some understanding from historical data, perhaps? How we can write the correct queries and how we can find the correct joins. It's not always the case that data is going to be defined by some foreign key in a create statement. And oftentimes, in very business specific use cases, something as simple as revenue isn't just a sum of some cost.</p>
<h3 id="business-specific-calculations">Business-Specific Calculations</h3>
<p>In some examples like finance, computing profit might be very specific to the business, and it won't be as simple as just summing up a single column somewhere in a database. And once you have a good understanding of what the inventory and the capabilities are, we can actually still try to define precision and recall metrics against that inventory.</p>
<p>Go back to basics, create synthetic data, and start to flywheel over and over again. And I hope you're really just noticing how repetitive this process is, this process I've been trying to drill into everyone throughout this course.</p>
<h3 id="testing-table-retrieval">Testing Table Retrieval</h3>
<p>So the first challenge, again, is to define what is the right asset. And our objective is to test if the system can correctly return the right tables for a search query when there are many tables in place. We might want to take the create statements, have some descriptions for the tables, and generate summaries that point to the reference of the tables.</p>
<p>Once we do that, we can verify whether or not the questions we're asking are retrieving correctly. A simple example could be if I ask the question like "how many users generate more than 10,000 revenue." Ideally, I want to assert that the users table and the finance table is being retrieved.</p>
<p>And just like that, we can think about precision and recall all over again.</p>
<h3 id="retrieving-the-right-capabilities">Retrieving the Right Capabilities</h3>
<p>It's one thing to make sure that we have the correct tables, but it's another to make sure that we're using them correctly. So one of the other things we want to think about is retrieving the right capabilities.</p>
<p>Here, our goal is to identify whether or not the system retrieves the correct SQL queries, especially in situations that involve things like joins, and might include different mistakes the average data scientist might make. Here, our goal is to identify patterns in existing SQL queries and create snippets for them.</p>
<p>For example, in a lot of the companies I work with, month-over-month statistics is a very complex and nuanced situation that might depend on finance, for example. And just having a single example on how to compute month over month or day over day can really help the language model do the right thing.</p>
<h3 id="the-ui-for-collecting-gold-standards">The UI for Collecting Gold Standards</h3>
<p>One additional callout is that we can actually build UI to start collecting these gold snippets that we use as few shots in the future. This really goes back to our session three content, where a lot of the product that we build should help us secretly collect data to improve our product and allowing a user to star a SQL statement, for example, can go a long way.</p>
<h3 id="subjective-query-interpretation">Subjective Query Interpretation</h3>
<p>And if you really look at how nuanced some of these SQL queries are, you'll realize how powerful pulling out these examples could be. It's not always obvious what month over month means. Sometimes when a company says month over month, they're really thinking 28 day rolling average versus completing the calendar month. We don't really know what they're talking about unless we have examples.</p>
<p>Let me give you specific examples of how different companies interpret the same query:</p>
<p><strong>"Month over Month Growth":</strong>
- Company A: 30-day rolling window from today
- Company B: 28-day rolling window (for consistency)
- Company C: Calendar month (1st to last day)
- Company D: Business month (26th to 25th for billing)</p>
<p><strong>"Recent customers":</strong>
- Startup: Last 7 days
- Enterprise: Last 90 days
- E-commerce: Since last purchase</p>
<p><strong>"High-value transactions":</strong>
- Retail: &gt; $500
- B2B SaaS: &gt; $10,000
- Investment firm: &gt; $1,000,000</p>
<p>I've included some examples of subjective queries that can just be resolved to a very specific query once we know what the customers really want. For example, when I just ask a language model for month over month, it potentially could do a 30 day rolling window, a 28 day rolling window, it might round to the calendar month, but we don't really know which one is the correct one.</p>
<p>And if we have opinions on this, we can set this in the context, set this as a system message, or dynamically retrieve this as your problem space gets bigger.</p>
<h2 id="metrics-and-evaluation">Metrics and evaluation</h2>
<ul>
<li>Retrieval precision and recall per modality (documents, images, tables)</li>
<li>Table selection Recall@K for table-as-database approaches</li>
<li>Re-ranker impact on top-K candidate quality</li>
<li>Offline evaluations via synthetic question sets per modality</li>
</ul>
<h2 id="common-pitfalls-and-anti-patterns">Common pitfalls and anti-patterns</h2>
<ul>
<li>Overreliance on generic CLIP captions for complex visual questions</li>
<li>Losing table headers/metadata when chunking tables</li>
<li>Treating aggregation/comparison as search instead of a separate capability</li>
<li>Using vague image summaries instead of task-focused descriptions</li>
</ul>
<h2 id="integration-points">Integration points</h2>
<ul>
<li>Feeds router design and selection in <a href="../chapter6-1/">6.1</a> and <a href="../chapter6-2/">6.2</a></li>
<li>Connects to feedback collection in <a href="../chapter3-1/">3.1</a> for training data</li>
<li>Uses evaluation flywheel from <a href="../chapter1/">1</a> and <a href="../chapter2/">2</a></li>
</ul>
<h2 id="whats-next">What’s next</h2>
<p>Continue to <a href="../chapter6-1/">6.1 Query Routing Foundations</a></p>
<h2 id="summary">Summary</h2>
<ul>
<li>Documents: combine lexical/semantic, re-rank, cite, and extract where needed</li>
<li>Images: generate task-focused summaries; use OCR/context; apply grounding if needed</li>
<li>Tables: "table as document" vs "table as database"; ensure headers/metadata persist</li>
<li>SQL: treat inventory (tables/columns) and capabilities (joins/calcs) separately</li>
</ul>
<h2 id="reflection-questions">Reflection questions</h2>
<ol>
<li>Which modality is the current bottleneck for your users, and why?</li>
<li>What summary/extraction would most improve that modality’s recall or precision?</li>
<li>How will you evaluate improvements (datasets, metrics, thresholds)?</li>
<li>What UI affordances help collect relevance signals for that modality?</li>
</ol>
<p>If you try to summarize how we think about handling tables, you'll realize that we cover a lot of what we've learned in the past couple of weeks. Doing well can be defined as having an inventory problem of whether or not we have the right table, or a capabilities problem, whether or not we understand how to query the table effectively.</p>
<p>We can define very simple metrics like our precision and recall in selecting the right table and selecting the right examples. And as we try to continuously improve the system, a lot of it will be around analyzing these queries to identify underperforming areas, whether we have missing inventory or missing capabilities.</p>
<p>Once we identify this, we can improve our tables inventory by creating some materialized views or some custom tables that can help us understand, or at least help the AI understand how to query the data.</p>
<p>With this relatively simple system and simple setup, our general RAG playbook can be reapplied to any subsystem. In this example, we're talking about text to SQL, but this can exist in all other cases, whether it's documents, whether it's images, or anything else.</p>
<p>Evals provide us with an estimate of the probability of success. And we tend to proxy this with recall. Segmentation allows us to figure out what kinds of problems we have, and the solution oftentimes will be splitting up the monolithic retriever into multiple retrievers.</p>
<p>And when we want to improve these retrievers, it is likely the case that they'll resemble either extracting structured data and querying structured data, or summarizing information and making those entities be pointers to the source data. And then, as a result, we can recursively apply the playbook for single components and for multiple components and so forth.</p>
<p>After this, we can continue to apply the synthetic data, segmentation, topics, and capabilities workflow to dig deeper into new problems.</p>
<p>None of these systems that we deploy is going to be a fire and forget scenario. We're always going to have to be monitoring and iterating on these processes.</p>
<p><strong>Because no matter how much better the AI gets, you're going to be responsible for retrieval.</strong></p>
<p>This is the fundamental truth about RAG systems. The models will get better at understanding. They'll get better at generating. But retrieval? That's on you. That's your data, your domain, your users' specific needs. Own it.</p>
<h2 id="food-for-thought">Food for Thought</h2>
<p>Before we go, I really want you to think about a couple of things. Whether it's for your work or for your own personal projects. If you've identified any specific user query segments or conversation segments.</p>
<p>I really want you to think about whether a new index or new metadata could be extracted to help you answer those questions.</p>
<p>And then start playing around with whether or not you can actually extract this data out of your text chunks. Or whether or not you can write queries for them.</p>
<p>And once you've built out this new index, then you can start synthetically generating new questions and basically rerun the playbook for that specific segment.</p>
<p>And if you can just be creative and do these steps really, really well, I think you're going to be in a very good position to improve any arbitrary AI application, whether it's for RAG or anything else. </p>
<p>Most of machine learning is monolithic model, identifying ways of specializing in such a way that in the future, a monolithic model takes over again. You can see this in LLMs. You first have a small model. It gets bigger. And if we can't make it any bigger, what we just do instead is we just train a mixture of experts. And at some point, you train one more model, and at some point, it becomes a mixture of experts of a bigger model.</p>
<p>This is just generally how machine learning works. And next week, we'll think about how we can actually have these mixture of retrievers and combine them again using a router.</p>
<hr />
<p>If you want to get discounts and 6 day email source on the topic make sure to subscribe to</p>
<script async data-uid="010fd9b52b" src="https://fivesixseven.kit.com/010fd9b52b/index.js"></script>







  
  



  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../chapter5-1/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Understanding">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                Understanding
              </div>
            </div>
          </a>
        
        
          
          <a href="../chapter6-1/" class="md-footer__link md-footer__link--next" aria-label="Next: Routing">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Routing
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://x.com/jxnlco" target="_blank" rel="noopener" title="x.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["announce.dismiss", "navigation.instant", "navigation.tracking", "navigation.expand", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.footer", "search.highlight", "search.share", "search.suggest", "toc.follow", "content.code.copy", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.13a4f30d.min.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="../../javascripts/mathjax.js"></script>
      
    
  </body>
</html>